var Mustache=typeof module!="undefined"&&module.exports||{};(function(a){function i(a){return h.test(a)}function n(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return m[a]||a})}function o(a,b,c,d){d=d||"<template>";var e=b.split("\n"),f=Math.max(c-3,0),g=Math.min(e.length,c+3),h=e.slice(f,g),i;for(var j=0,k=h.length;j<k;++j)i=j+f+1,h[j]=(i===c?" >> ":"    ")+h[j];return a.template=b,a.line=c,a.file=d,a.message=[d+":"+c,h.join("\n"),"",a.message].join("\n"),a}function p(a,b){var c=a.split("."),d=c.length-1,e=c[d],f,g,h=b.length,i,j;while(h){j=b.slice(0),g=b[--h],i=0;while(i<d){g=g[c[i++]];if(g==null)break;j.push(g)}if(g&&e in g){f=g[e];break}}return typeof f=="function"&&(f=f.call(j[j.length-1])),f==null?"":f}function q(a,b,c,d,e){if(e)(b==null||b===!1||f(b)&&b.length===0)&&a(c());else if(f(b))g(b,function(b){d.push(b),a(c()),d.pop()});else if(typeof b=="object")d.push(b),a(c()),d.pop();else if(typeof b=="function"){var h=d[d.length-1],i=function(a){return w(a,h)};a(b.call(h,c(),i)||"")}else b&&a(c())}function r(b,c){c=c||{};var d=c.tags||a.tags,e=d[0],f=d[d.length-1],g=["var line = 1;","\ntry {",'\nsend("'],h=[],k=!1,l=function(){if(!k&&!c.space)while(h.length)g.splice(h.pop(),1);else h=[];k=!1},m=function(a){return a==="."?"stack[stack.length - 1]":'find("'+a+'")'},n=[],p,q,r,s=function(a){d=j(a).split(/\s+/),q=d[0],r=d[d.length-1]},t=function(a){g.push('");',p,'\nvar partial = partials["'+j(a)+'"];',"\nif (partial) {","\n  send(render(partial, stack[stack.length - 1], partials));","\n}",'\nsend("')},u=function(a,d){var e=j(a);if(e==="")throw o(new Error("Section name may not be empty"),b,z,c.file);n.push({name:e,inverted:d}),g.push('");',p,"\nvar value = "+m(e)+";","\nvar callback = (function () {","\n  var buffer, send = function (chunk) { buffer.push(chunk); };","\n  return function () {","\n    buffer = [];",'\nsend("')},v=function(a){u(a,!0)},w=function(a){var c=j(a),d=n.length!=0&&n[n.length-1].name;if(!d||c!=d)throw o(new Error('Section named "'+c+'" was never opened'),b,z,file);var e=n.pop();g.push('");','\n    return buffer.join("");',"\n  };","\n})();"),e.inverted?g.push("\nsendSection(send,value,callback,stack,true);"):g.push("\nsendSection(send,value,callback,stack);"),g.push('\nsend("')},x=function(a){g.push('");',p,"\nsend("+m(j(a))+");",'\nsend("')},y=function(a){g.push('");',p,"\nsend(escapeHTML("+m(j(a))+"));",'\nsend("')},z=1,A,B;for(var C=0,D=b.length;C<D;++C)if(b.slice(C,C+e.length)===e){C+=e.length,A=b.substr(C,1),p="\nline = "+z+";",q=e,r=f;switch(A){case"!":C++,B=null;break;case"=":C++,f="="+f,B=s;break;case">":C++,B=t;break;case"#":C++,B=u;break;case"^":C++,B=v;break;case"/":C++,B=w;break;case"{":f="}"+f;case"&":C++,k=!0,B=x;break;default:k=!0,B=y}var E=b.indexOf(f,C);if(E===-1)throw o(new Error('Tag "'+e+'" was not closed properly'),b,z,c.file);var F=b.substring(C,E);B&&B(F);var G=0;while(~(G=F.indexOf("\n",G)))z++,G++;C=E+f.length-1,e=q,f=r}else{A=b.substr(C,1);switch(A){case'"':case"\\":k=!0,g.push("\\"+A);break;case"\n":h.push(g.length),g.push("\\n"),l(),z++;break;default:i(A)?h.push(g.length):k=!0,g.push(A)}}if(n.length!=0)throw o(new Error('Section "'+n[n.length-1].name+'" was not closed properly'),b,z,c.file);l(),g.push('");',"\nsend(null);","\n} catch (e) { throw {error: e, line: line}; }");var H=g.join("").replace(/send\(""\);\n/g,"");return c.debug&&(typeof console!="undefined"&&console.log?console.log(H):typeof print=="function"&&print(H)),H}function s(a,b){var c="view,partials,send,stack,find,escapeHTML,sendSection,render",d=r(a,b),e=new Function(c,d);return function(c,d,f){typeof d=="function"&&(f=d,d={}),d=d||{};var g=[],h=f||function(a){g.push(a)},i=[c],j=function(a){return p(a,i)};try{e(c,d,h,i,j,n,q,w)}catch(k){throw o(k.error,a,k.line,b.file)}return g.join("")}}function u(){t={}}function v(a,b){return b=b||{},b.cache!==!1?(t[a]||(t[a]=s(a,b)),t[a]):s(a,b)}function w(a,b,c,d){return v(a)(b,c,d)}a.name="mustache.js",a.version="0.5.0-dev",a.tags=["{{","}}"],a.parse=r,a.compile=v,a.render=w,a.clearCache=u,a.to_html=w;var b=Object.prototype.toString,c=Array.isArray,d=Array.prototype.forEach,e=String.prototype.trim,f;c?f=c:f=function(a){return b.call(a)==="[object Array]"};var g;d?g=function(a,b,c){return d.call(a,b,c)}:g=function(a,b,c){for(var d=0,e=a.length;d<e;++d)b.call(c,a[d],d,a)};var h=/^\s*$/,j;if(e)j=function(a){return a==null?"":e.call(a)};else{var k,l;i(" ")?(k=/^\s+/,l=/\s+$/):(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),j=function(a){return a==null?"":String(a).replace(k,"").replace(l,"")}}var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},t={}})(Mustache)